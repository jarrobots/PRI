version: "3.8"
services:
  prib:
    image: ghcr.io/jarrobots/pri_backup:latest
    container_name: prib
    ports:
      - "${PRIB_PORT:-8082}:8082"
    networks:
      - my-network
    env_file:
      - config.env
    environment:
      - SPRING_PROFILES_ACTIVE=dev


  prif:
    image: ghcr.io/jarrobots/pri_frontend:latest
    container_name: prif
    ports:
      - "3000:3000"
    networks:
      - my-network

 watchtower:
   image: containrrr/watchtower:latest
   container_name: watchtower
   volumes:
     - /var/run/docker.sock:/var/run/docker.sock
   restart: always
   command: --schedule "0 0 4 * * *" --cleanup prib prif  # Sprawdza co 4 rano, czy≈õci stare obrazy, tylko te 2 kontenery

networks:
  my-network:
    driver: bridge
